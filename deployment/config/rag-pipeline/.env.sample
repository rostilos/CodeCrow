# === Service-to-Service Auth ===
# Shared secret for authenticating incoming requests from mcp-client.
# Must match the SERVICE_SECRET configured on mcp-client.
# Leave empty to disable auth (dev mode only).
SERVICE_SECRET=change-me-to-a-random-secret

# === Path Traversal Guard ===
# Root directory that repo_path arguments are allowed under.
# The rag-pipeline will reject any index/query request whose resolved
# path escapes this directory. Default: /tmp
ALLOWED_REPO_ROOT=/tmp

#QDRANT configuration
QDRANT_URL=http://qdrant:6333
QDRANT_COLLECTION_PREFIX=codecrow

# ollama/openrouter
EMBEDDING_PROVIDER=openrouter
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_EMBEDDING_MODEL=qwen3-embedding:0.6b

# Ollama Performance Tuning
# Batch size for embedding requests (higher = better throughput, more memory)
OLLAMA_BATCH_SIZE=100
# Request timeout in seconds (increase for slow CPU)
OLLAMA_TIMEOUT=120

# CPU Threading Optimization (set based on your CPU cores)
# Recommended: physical_cores - 1 (leave 1 core for system)
OMP_NUM_THREADS=6
MKL_NUM_THREADS=6
OPENBLAS_NUM_THREADS=6

# OpenRouter Configuration
# Get your API key from https://openrouter.ai/
OPENROUTER_API_KEY=sk-or-v1-your-api-key-here
OPENROUTER_MODEL=qwen/qwen3-embedding-8b

#Additional Environment Variables
HOME=/tmp
TIKTOKEN_CACHE_DIR=/tmp/.tiktoken_cache
TRANSFORMERS_CACHE=/tmp/.transformers_cache
HF_HOME=/tmp/.huggingface
LLAMA_INDEX_CACHE_DIR=/tmp/.llama_index

# Free Plan Limits (Optional - set to 0 to disable limits)
RAG_MAX_CHUNKS_PER_INDEX=70000
RAG_MAX_FILES_PER_INDEX=40000

RAG_USE_AST_SPLITTER=true

# Concurrency: Number of Uvicorn workers (allows parallel indexing)
UVICORN_WORKERS=4

# Alternative OpenRouter models (use full format with provider prefix):
# OPENROUTER_MODEL=openai/text-embedding-3-large  # Higher quality, more expensive
# OPENROUTER_MODEL=openai/text-embedding-ada-002  # Legacy model
# See https://openrouter.ai/docs for more models

# Chunking Configuration (Optional)
# CHUNK_SIZE=800              # Chunk size for code files
# CHUNK_OVERLAP=200           # Overlap between chunks
# TEXT_CHUNK_SIZE=1000        # Chunk size for text files
# TEXT_CHUNK_OVERLAP=200      # Overlap for text files

# Retrieval Configuration (Optional)
# RETRIEVAL_TOP_K=10          # Number of results to retrieve
# SIMILARITY_THRESHOLD=0.7    # Minimum similarity score

# File Processing (Optional)
# MAX_FILE_SIZE_BYTES=1048576  # Max file size (1MB default)

# Server Configuration (Optional)
# SERVER_HOST=0.0.0.0
# SERVER_PORT=8001

